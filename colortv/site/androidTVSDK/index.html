<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
    
    <title>ANDROID TV / FIRE TV SDK - Getting Started</title>
    
    
    
    
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Getting Started">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="Getting Started">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <style>
        @font-face {
            font-family: 'Icon';
            src: url('../assets/fonts/icon.eot?52m981');
            src: url('../assets/fonts/icon.eot?#iefix52m981') format('embedded-opentype'),
            url('../assets/fonts/icon.woff?52m981') format('woff'),
            url('../assets/fonts/icon.ttf?52m981') format('truetype'),
            url('../assets/fonts/icon.svg?52m981#icon') format('svg');
            font-weight: normal;
            font-style: normal;
        }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application.css">
    
    
    
    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
    <style>
        body, input {
            font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
            font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
    </style>
    
    
    <link rel="stylesheet" href="../extra.css">
    
    <link rel="stylesheet" href="../highlightjs.css">
    
    <script src="../assets/javascripts/modernizr.js"></script>
    
</head>
<body>

<div class="backdrop">
    <div class="backdrop-paper"></div>
</div>
<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>
<header class="header">
    <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        
          ANDROID TV / FIRE TV SDK
        
      </div>
    </div>
    
    
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/color-tv" title="@color-tv on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>
<main class="main">
    
    <div class="drawer">
        <nav aria-label="Navigation">
  
  <div class="project">
    <div class="banner">
      
      <div class="name">
        Documentation
        
      </div>
    </div>
  </div>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Getting Started" href="..">
      Getting Started
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="TVOS SDK" href="../tvOsSdk/">
      TVOS SDK
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="UNITY TVOS" href="../unityTVOS/">
      UNITY TVOS
    </a>
    
  </li>

          
            
  <li>
    <a class="current" title="ANDROID TV / FIRE TV SDK" href="./">
      ANDROID TV / FIRE TV SDK
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="Getting Started" href="#getting-started">
                Getting Started
              </a>
            </li>
          
            <li class="anchor">
              <a title="Adding Android TV/Amazon Fire TV SDK" href="#adding-android-tvamazon-fire-tv-sdk">
                Adding Android TV/Amazon Fire TV SDK
              </a>
            </li>
          
            <li class="anchor">
              <a title="Initializing the SDK" href="#initializing-the-sdk">
                Initializing the SDK
              </a>
            </li>
          
            <li class="anchor">
              <a title="Displaying Ads" href="#displaying-ads">
                Displaying Ads
              </a>
            </li>
          
            <li class="anchor">
              <a title="Declaring Session" href="#declaring-session">
                Declaring Session
              </a>
            </li>
          
            <li class="anchor">
              <a title="Earning Virtual Currency" href="#earning-virtual-currency">
                Earning Virtual Currency
              </a>
            </li>
          
            <li class="anchor">
              <a title="INSTALL_REFERRER Conflict" href="#install_referrer-conflict">
                INSTALL_REFERRER Conflict
              </a>
            </li>
          
            <li class="anchor">
              <a title="User profile" href="#user-profile">
                User profile
              </a>
            </li>
          
            <li class="anchor">
              <a title="Disabling voice input on phone fields" href="#disabling-voice-input-on-phone-fields">
                Disabling voice input on phone fields
              </a>
            </li>
          
            <li class="anchor">
              <a title="Summary" href="#summary">
                Summary
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            
  <li>
    <a class="" title="UNITY ANDROID TV / FIRE TV" href="../unityAndroidTV/">
      UNITY ANDROID TV / FIRE TV
    </a>
    
  </li>

          
        </ul>

      </div>
    </div>
  </div>
</nav>
    </div>
    <article class="article">
        <div class="wrapper">
            
            
            <h1>ANDROID TV / FIRE TV SDK</h1>
            
            
            <h2 id="getting-started">Getting Started</h2>
<p>Before getting started make sure you have: </p>
<ul>
<li>
<p>Added your app in the My Applications section of the Color Dashboard. You need to do this so that you can get your App ID that you'll be adding to your app with our SDK.</p>
</li>
<li>
<p>Make sure your Android Studio version is up to date and that your application is targeting <code>minSdkVersion:14</code></p>
</li>
</ul>
<div class="admonition note">
<p>Our SDK supports Android versions 21+, but for convenience in maintaining one app for multiple platforms we've lowered the <code>minSdkVersion</code> to 14. ColorTv SDK will not be initialized however on versions below 21.</p>
</div>
<h2 id="adding-android-tvamazon-fire-tv-sdk">Adding Android TV/Amazon Fire TV SDK</h2>
<p>For a demo of the correct integration, please refer to our <a href="https://github.com/color-tv/android-DemoApp">demo application</a></p>
<h3 id="connecting-your-app">Connecting Your App</h3>
<p>In your project's <strong>build.gradle</strong> make sure you are using ColorTV Bintray repository:</p>
<pre class="code"><code class="language-groovy">repositories {
    maven {
        url  &quot;http://colortv.bintray.com/maven&quot;
    }
}</code></pre>


<p>Then add the following dependencies in your app's <strong>build.gradle</strong> file in Android Studio: </p>
<pre class="code"><code class="language-groovy">dependencies {
    compile 'com.colortv:android-sdk:1.6.0'
    compile 'com.google.android.gms:play-services-ads:9.4.0'
    compile 'com.android.support:recyclerview-v7:24.1.1'
}</code></pre>


<p>Doing this prevents you from having to download our SDK and adding it manually to your project, as the aar file will handle that for you.</p>
<h2 id="initializing-the-sdk">Initializing the SDK</h2>
<p>Import the SDK to your <code>MainActivity.java</code> file.</p>
<pre class="code"><code class="language-java">import com.colortv.android.ColorTvSdk;</code></pre>


<p>Setup the ColorTvSDK for your app by invoking <code>ColorTvSdk</code> initialization method below in your code. </p>
<pre class="code"><code class="language-java">ColorTvSdk.init(this, &quot;your_app_id_from_dashboard&quot;);</code></pre>


<p>Your app id is generated in the publisher dashboard after adding or editing an application in the My Applications section. Copy the app id and paste the value for "your_app_id_from_dashboard".</p>
<div class="admonition note">
<p>We recommend putting the initialization method inside either <strong>Application.onCreate()</strong> or <strong>MainActivity.onCreate() </strong>. The application must be initialized before invoking any functions of the SDK.</p>
</div>
<h2 id="displaying-ads">Displaying Ads</h2>
<p>Ads may be shown wherever you place them inside your app, but they <strong>must</strong> include a Placement parameter to indicate the specific location. Placements are used to optimize user experience and analytics. </p>
<h3 id="placements">Placements</h3>
<p>Below are all the possible placement values: </p>
<ul>
<li>
<p>AppLaunch</p>
</li>
<li>
<p>AppResume</p>
</li>
<li>
<p>AppClose</p>
</li>
<li>
<p>MainMenu</p>
</li>
<li>
<p>Pause</p>
</li>
<li>
<p>StageOpen</p>
</li>
<li>
<p>StageComplete</p>
</li>
<li>
<p>StageFailed</p>
</li>
<li>
<p>LevelUp</p>
</li>
<li>
<p>BetweenLevels</p>
</li>
<li>
<p>StoreOpen</p>
</li>
<li>
<p>InAppPurchase</p>
</li>
<li>
<p>AbandonInAppPurchase</p>
</li>
<li>
<p>VirtualGoodPurchased</p>
</li>
<li>
<p>UserHighScore</p>
</li>
<li>
<p>OutofGoods</p>
</li>
<li>
<p>OutofEnergy</p>
</li>
<li>
<p>InsufficientCurrency</p>
</li>
<li>
<p>FinishedTutorial</p>
</li>
</ul>
<div class="admonition note">
<p>You can choose what ad units you want to show for a specific placement in the dashboard, <a href="..#ad-units">click to learn more about Ad Units</a></p>
</div>
<p>To get callbacks about the ad status, you need to create a <code>ColorTvAdListener</code> object by overriding it's methods:</p>
<pre class="code"><code class="language-java">ColorTvAdListener listener = new ColorTvAdListener() {

    @Override
    public void onAdLoaded(String placement) {
        ColorTvSdk.showAd(placement);
    }

    @Override
    public void onAdError(String placement, ColorTvError colorTvError) {
    }

    @Override
    public void onAdClosed(String placement, boolean watched) {
    }

    @Override
    public void onAdExpired(String placement) {
    }
};</code></pre>


<p>and register that listener to the SDK:</p>
<pre class="code"><code class="language-java">ColorTvSdk.registerAdListener(listener);</code></pre>


<div class="admonition note">
<p class="admonition-title">WARNING</p>
<p>The <strong>onAdClosed</strong> callback without the <strong>watched</strong> flag has been deprecated and will be removed in future versions of the SDK.</p>
</div>
<p>To load an ad for a certain placement, you need to call the following method:</p>
<pre class="code"><code class="language-java">ColorTvSdk.loadAd(AdPlacement.LEVEL_UP);</code></pre>


<p>Use one of the predefined placements that you can find in <code>AdPlacement</code> class, e.g. <code>AdPlacement.LEVEL_UP</code>.</p>
<p>In order to show an ad, call the following function: </p>
<pre class="code"><code class="language-java">ColorTvSdk.showAd(AdPlacement.LEVEL_UP);</code></pre>


<p>Calling this method will show an ad for the placement you pass. Make sure you get the <code>adLoaded</code> callback first, otherwise the ad won't be played.</p>
<div class="admonition note">
<p>It is recommended to set up multiple placements inside your app to maximize monetization and improve user experience.</p>
</div>
<h2 id="declaring-session">Declaring Session</h2>
<p>Creating a session is <strong>necessary</strong> for tracking virtual currency transactions and user sessions. Add the following code to every Activity file in your application e.g. <code>MainActivity.java</code></p>
<pre class="code"><code class="language-java">// Start Session
@Override
protected void onCreate() {
  super.onCreate();
  ColorTvSdk.onCreate();
}

// End Session
@Override
protected void onDestroy() {
  super.onDestroy();
  ColorTvSdk.onDestroy();
}</code></pre>


<h2 id="earning-virtual-currency">Earning Virtual Currency</h2>
<p>A listener must be added in order to receive events when a virtual currency transaction has occurred. </p>
<pre class="code"><code class="language-java">private OnCurrencyEarnedListener listener = new OnCurrencyEarnedListener() {
    @Override
    public void onCurrencyEarned(String placement, int currencyAmount, String currencyType){

    }
};

...

ColorTvSdk.addOnCurrencyEarnedListener(listener);</code></pre>


<p>Use the following function to unregister listeners:</p>
<pre class="code"><code class="language-java">ColorTvSdk.removeOnCurrencyEarnedListener(listener);</code></pre>


<p>Use the following function to cancel all listeners: </p>
<pre class="code"><code class="language-java">ColorTvSdk.clearOnCurrencyEarnedListeners();</code></pre>


<div class="admonition note">
<p class="admonition-title">Reminder!</p>
<p>Session must also be implemented for virtual currency transactions to function.</p>
</div>
<h3 id="currency-for-user">Currency for user</h3>
<p>In order to distribute currency to the same user but on other device, use below:</p>
<pre class="code"><code class="language-java">ColorTvSdk.setUserId(&quot;user123&quot;);</code></pre>


<h2 id="install_referrer-conflict">INSTALL_REFERRER Conflict</h2>
<p>If any of your <code>BroadcastReceiver</code> class declared in <code>AndroidManifest.xml</code> contains Intent Action <code>INSTALL_REFERRER</code>:</p>
<pre class="code"><code class="language-xml">&lt;receiver ...&gt;
  &lt;intent-filter&gt;
    &lt;action android:name=&quot;com.android.vending.INSTALL_REFERRER&quot;/&gt;
  &lt;/intent-filter&gt;
&lt;/receiver&gt;</code></pre>


<p>Add the following code to your <code>AndroidManifest.xml</code> file: </p>
<pre class="code"><code class="language-xml">&lt;receiver android:name=&quot;com.colortv.android.ColorTvBroadcastReceiver&quot;&gt;</code></pre>


<p>In your BroadcastReceiver that handles action <strong>com.android.vending.INSTALL_REFERRER</strong>, add Java code:</p>
<pre class="code"><code class="language-java">if (intent.getAction().equals(&quot;com.android.vending.INSTALL_REFERRER&quot;)) {
  final String referrer = intent.getStringExtra(&quot;referrer&quot;);
  ColorTvSdk.registerReferrer(context, referrer);
}</code></pre>


<h2 id="user-profile">User profile</h2>
<p>To improve ad targeting you can use the UserProfile class. To do so, create a new instance of this class:</p>
<pre class="code"><code class="language-java">UserProfile user = new UserProfile(context);</code></pre>


<p>You can set age, gender and some keywords as comma-separated values, eg. <code>sport,health</code> like so:</p>
<pre class="code"><code class="language-java">user.setAge(24);
user.setGender(UserProfile.Gender.FEMALE);
user.setKeywords(&quot;sport,health&quot;);</code></pre>


<p>These values will automatically be saved and attached to an ad request.</p>
<h2 id="disabling-voice-input-on-phone-fields">Disabling voice input on phone fields</h2>
<p>If you don't want to use the voice input functionality add the following line to your manifest:</p>
<pre class="code"><code class="language-xml">&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; tools:node=&quot;remove&quot; /&gt;</code></pre>


<p>and call the following method after the <code>ColorTvSdk.init()</code>:</p>
<pre class="code"><code class="language-java">ColorTvSdk.setRecordAudioEnabled(false);</code></pre>


<h2 id="summary">Summary</h2>
<p>After completing all previous steps your Activity could look like this:</p>
<pre class="code"><code class="language-java">import com.colortv.android.AdPlacement;
import com.colortv.android.ColorTvAdListener;
import com.colortv.android.ColorTvError;
import com.colortv.android.ColorTvSdk;
import com.colortv.android.OnCurrencyEarnedListener;

public class MainActivity extends Activity {

    private ColorTvAdListener listener = new ColorTvAdListener() {

        @Override
        public void onAdLoaded(String placement) {
            ColorTvSdk.showAd(placement);
        }

        @Override
        public void onAdError(String placement, ColorTvError colorTvError) {

        }

        @Override
        public void onAdClosed(String placement) {
        }

        @Override
        public void onAdExpired(String placement) {
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ColorTvSdk.setDebugMode(true);
        ColorTvSdk.init(this, &quot;your_app_id&quot;);
        ColorTvSdk.registerOnAdStatusChangedListener(listener);

        findViewById(R.id.btnShowAd).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                ColorTvSdk.loadAd(AdPlacement.APP_LAUNCH);
            }
        });

        ColorTvSdk.addOnCurrencyEarnedListener(new OnCurrencyEarnedListener() {
            @Override
            public void onCurrencyEarned(String placement, int currencyAmount, String currencyType) {
                Toast.makeText(MainActivity.this, &quot;Received &quot; + currencyAmount + &quot; &quot; + currencyType, Toast.LENGTH_LONG).show();
            }
        });

        ColorTvSdk.onCreate();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        ColorTvSdk.onDestroy();
        ColorTvSdk.clearOnCurrencyEarnedListeners();
    }
}</code></pre>
            <div class="helpful">
                <hr>
                <div class="initialPart">
                    <span class="helpfulSectionLabel">Was this section helpful?</span>
                    <div class="helpfulSectionButtonBlock">
                        <button type="button" class="buttonWhiteWithHover" id="yesHelpSectionButton">Yes</button>
                        <button type="button" class="buttonWhiteWithHover" id="noHelpSectionButton">No</button>
                    </div>
                </div>
                <span class="helpfulSectionThanks animateShow">Thanks for your feedback! We always working on improving our documentation.</span>
                <span class="helpfulSectionError animateShow">Could not establish a connection to the server. Please check your internet and try again.</span>
                <div class="helpfulSectionWhyNot animateShow">
                    <span class="helpfulSectionWhyNotLabel">Please leave your feedback so we can work on improving our documentation.</span><br>
                    <textarea noresize class="helpfulSectionWhyNotTextarea"></textarea><br>
                    <span class="helpfulSectionWhyNotTextAreaError animateShow">Please write a longer description.</span>
                    <button id="opinionSubmit" class="helpfulSectionWhyNotSubmit buttonWhiteWithHover">Submit</button>
                </div>
            </div>
            <div class="bottomPadding"></div>
        </div>
    </article>
    
    <footer class="footer">
        
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../unityTVOS/" title="UNITY TVOS">
          <span class="direction">Previous</span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                UNITY TVOS
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../unityAndroidTV/" title="UNITY ANDROID TV / FIRE TV">
          <span class="direction">Next</span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                UNITY ANDROID TV / FIRE TV
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>


<script>
  function inIframe () {
    try {
      return window.self !== window.top;
    } catch (e) {
      return true;
    }
  }
  var header = document.getElementsByClassName('header');
  if (inIframe ()) {
    header.className += ' in-frame'
  }
</script>
    </footer>
    
    <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
            <div class="wrapper">
                <div class="meta"></div>
                <div class="list"></div>
            </div>
        </div>
    </div>
</main>
<script>
    var base_url = '..';
    var repo_id = '';
</script>
<script src="../assets/javascripts/application.js"></script>

<script src="../highlight.min.js"></script>

<script src="../jquery-2.2.1.min.js"></script>

<script src="../zscript.js"></script>


</body>
</html>